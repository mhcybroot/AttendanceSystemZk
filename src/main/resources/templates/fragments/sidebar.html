<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<body th:fragment="sidebar(activeLink)">
    <div class="border-end" id="sidebar-wrapper">
        <div class="sidebar-heading border-bottom bg-dark text-white">[[${companyName}]]</div>
        <div class="list-group list-group-flush">
            <!-- Admin Only: Assets -->
            <a sec:authorize="hasRole('ADMIN')" href="/admin/assets"
                class="list-group-item list-group-item-action bg-transparent border-0"
                th:classappend="${activeLink == 'assets'} ? 'active fw-bold'">
                <i class="fas fa-boxes me-2"></i> Assets
            </a>

            <!-- Admin Only: Departments -->
            <div sec:authorize="hasAnyRole('ADMIN', 'HR')">
                <a href="/dashboard" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'dashboard'} ? 'active'">
                    <i class="fas fa-tachometer-alt me-2"></i> Dashboard
                </a>
                <a href="/attendance" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'attendance'} ? 'active'">
                    <i class="fas fa-clipboard-list me-2"></i> Attendance Logs
                </a>
                <a href="/employees" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'employees'} ? 'active'">
                    <i class="fas fa-users me-2"></i> Employees
                </a>
                <a href="/departments" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'departments'} ? 'active'">
                    <i class="fas fa-building me-2"></i> Departments
                </a>

                <div class="sidebar-heading border-bottom bg-dark text-muted small py-2">REPORTS</div>
                <a href="/reports" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'reports'} ? 'active'">
                    <i class="fas fa-calendar-day me-2"></i> Daily Report
                </a>
                <a href="/reports/weekly" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'reports-weekly'} ? 'active'">
                    <i class="fas fa-calendar-week me-2"></i> Weekly Report
                </a>
                <a href="/reports/monthly" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'reports-monthly'} ? 'active'">
                    <i class="fas fa-calendar-alt me-2"></i> Monthly Report
                </a>
                <a href="/leave/calendar" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'leave-calendar'} ? 'active'">
                    <i class="fas fa-calendar-check me-2"></i> Leave Calendar
                </a>

                <div class="sidebar-heading border-bottom bg-dark text-muted small py-2">FINANCE</div>
                <a href="/payroll" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'payroll'} ? 'active'">
                    <i class="fas fa-money-bill-wave me-2"></i> Payroll
                </a>
            </div>

            <!-- Employee Navigation -->
            <div sec:authorize="hasRole('EMPLOYEE')">
                <a href="/employee/dashboard" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'dashboard'} ? 'active'">
                    <i class="fas fa-id-card me-2"></i> My Dashboard
                </a>
                <a href="/employee/assets" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'my-assets'} ? 'active'">
                    <i class="fas fa-laptop me-2"></i> My Assets
                </a>
                <a href="/employee/attendance/history" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'history'} ? 'active'">
                    <i class="fas fa-history me-2"></i> My History
                </a>
                <a href="/leave/employee" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'leave'} ? 'active'">
                    <i class="fas fa-calendar-check me-2"></i> My Leave
                </a>
                <a href="/employee/payroll" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'payroll'} ? 'active'">
                    <i class="fas fa-file-invoice-dollar me-2"></i> My Payslips
                </a>
                <a href="/employee/change-password" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'change-password'} ? 'active'">
                    <i class="fas fa-key me-2"></i> Change Password
                </a>
            </div>

            <!-- Smart Manager Section (Visible if user manages ANYONE) -->
            <div th:if="${isSupervisor}">
                <div class="sidebar-heading border-bottom bg-dark text-muted small py-2">MANAGE YOUR WORKS</div>
                <a href="/supervisor/dashboard" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'supervisor-dashboard'} ? 'active'">
                    <i class="fas fa-chart-line me-2"></i> Team Dashboard
                </a>
            </div>



            <!-- Management Section (Admin & HR) -->
            <div sec:authorize="hasAnyRole('ADMIN', 'HR')">
                <div class="sidebar-heading border-bottom bg-dark text-muted small py-2">MANAGEMENT</div>
                <a href="/leave/manage" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'leave-manage'} ? 'active'">
                    <i class="fas fa-envelope-open-text me-2"></i> Leave Requests
                </a>
            </div>

            <div sec:authorize="hasRole('ADMIN')">
                <div class="sidebar-heading border-bottom bg-dark text-muted small py-2">SYSTEM</div>
                <a href="/devices" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'devices'} ? 'active'">
                    <i class="fas fa-server me-2"></i> Devices
                </a>
                <a href="/admin/shifts" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'shifts'} ? 'active'">
                    <i class="fas fa-clock me-2"></i> Shifts
                </a>
                <a href="/settings" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'settings'} ? 'active'">
                    <i class="fas fa-cogs me-2"></i> Settings
                </a>
                <a href="/users" class="list-group-item list-group-item-action"
                    th:classappend="${activeLink == 'users'} ? 'active'">
                    <i class="fas fa-users-cog me-2"></i> Users
                </a>
            </div>
        </div>
    </div>
</body>

</html>